<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Telegram WebSocket Chat</title>
    <style>
      body {
        font-family: sans-serif;
        background: #111;
        color: #eee;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem;
      }
      #messages {
        width: 80%;
        height: 300px;
        border: 1px solid #444;
        overflow-y: auto;
        margin-bottom: 1rem;
        padding: 1rem;
      }
      input, button {
        padding: 0.5rem;
        margin: 0.2rem;
      }
    </style>
  </head>
  <body>
    <h2>ðŸ’¬ Telegram WebSocket Chat</h2>
    <div id="messages"></div>

    <!-- <input id="chatId" placeholder="Chat ID" /> -->
    <input id="text" placeholder="Message" />
    <div id="chatId"> </div>
    <button id="send">Send</button>

    <script>
      const ws = new WebSocket(`wss://${location.host}`);

      const urlParams = new URLSearchParams(window.location.search);
const chatId = urlParams.get("chat_id");
// ws.chatId = chatId;
          const chatid = document.getElementById("messages");
          chatid.innerHTML  = chatId
      
// console.logI(chatId , 'chatId')
      ws.onmessage = (event) => {
        const data = JSON.parse(event.data);
        console.log(data, 'data inter')
        // if (data.type === "message") {
          const div = document.getElementById("messages");
          let messages = data.map((message)=>  `<div> ${message}</div>`)
          div.innerHTML += messages; 
        // }
      };

      document.getElementById("send").onclick = () => {
        // const chatId = document.getElementById("chatId").value;
        const text = document.getElementById("text").value;
        ws.send(JSON.stringify({  text }));
      };
    </script>
  </body>
</html>
